

<section>
  <bus-heading 
    title="Register a Line"
    subTitle="Declare all the component parts of a line.">
    <bus-line-icon icon />
  </bus-heading>
  
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <bus-back-end-alert [error]="validator.error" />

    <div busFormFieldsWrapper>
      <bus-input-wrapper #identification name="identification" [form]="form" [messages]="messages">
        <label busLabel [for]="identification.name">Identification</label>
        <input busInput
          [id]="identification.name"
          [name]="identification.name"
          [formControlName]="identification.name" />
      </bus-input-wrapper>
    </div>

    <div busFormFieldsWrapper>
      <bus-input-wrapper #fromwards name="fromwards" [form]="form" [messages]="messages">
        <label busLabel [for]="fromwards.name">Fromwards</label>
        <input busInput
          [id]="fromwards.name"
          [name]="fromwards.name"
          [formControlName]="fromwards.name" />
      </bus-input-wrapper>
    </div>

    <div busFormFieldsWrapper>
      <bus-input-wrapper #towards name="towards" [form]="form" [messages]="messages">
        <label busLabel [for]="towards.name">Towards</label>
        <input busInput
          [id]="towards.name"
          [name]="towards.name"
          [formControlName]="towards.name" />
      </bus-input-wrapper>
    </div>

    <div busFormFieldsWrapper>
      <bus-input-wrapper #departuresPerDay name="departuresPerDay" [form]="form" [messages]="messages">
        <label busLabel [for]="departuresPerDay.name">Departures / Day</label>
        <input busInput
          [id]="departuresPerDay.name"
          [name]="departuresPerDay.name"
          [formControlName]="departuresPerDay.name" />
      </bus-input-wrapper>
    </div>

    <div busFormFieldsWrapper>
      <bus-input-wrapper #vehicles name="vehicles" [form]="form" [messages]="messages">
        <label busLabel [for]="vehicles.name">Vehicle Types</label>
        <ng-select
          [id]="vehicles.name"
          [items]="vehiclesList"
          [compareWith]="compareVehicles"
          [multiple]="true"
          [formControlName]="vehicles.name"
          bindLabel="description"
          bindValue="identification">
        </ng-select>
      </bus-input-wrapper>
    </div>
    
    <input busSubmitButton
      data-testid="submit-button"
      title="Submit"
      [isDisabled]="!form.valid" />

    @if (id != undefined) {
      <button busWarningButton (click)="onDelete($event)">Delete</button>
    }
  </form>
</section>
